{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "rgl",
	"patterns": [
		{"include": "#comments"}
		,{"include": "#dialog"}
		,{"include": "#command"}
	],
	"repository": {
		"comments":{
			"patterns": [{
				"name": "comment.line",
				"match": "^#.+$"
			}]
		},
		"dialog":{
			"patterns": [{
				"name": "entity.name.function",
				"begin": "(?=^\\[)",
				"end":"\n",
				"patterns": [{
					"name": "variable.parameter",
					"match": "^\\[([\\ \\w\\.\\;\\(\\)\\,]+)\\]"
				}
				,{
					"name": "punctuation.colon",
					"match": "\\B:"
				}
				,{
					"name": "keyword.operator",
					"match": "(\\^|#)"
				}
				,{
					"name": "storage.type",
					"match": "<\\w+(\\=\\d+)?>"
				}
				,{
					"name": "string.quoted.double",
					"match": "({.+})?$"
				}
			]
			}]
		},
		"command":{
			"patterns": [{
				"name": "entity.name.type",
				"begin": "^<(set:[^>]+|background|dice|hitpoint)>",
				"end":"\n",
				"patterns": [{
					"name": "constant.numeric.value",
					"match": "\\b(-)?\\d+$\\b"
				}
				,{
					"name": "keyword.control",
					"match": "\\B:"
				}
				,{
					"name": "constant.numeric",
					"match": "<\\w+(\\=\\d+)?>"
				}
				,{
					"name": "string.quoted.double",
					"match": "({.+})?$"
				}
			]
			}]
		}
	},
	
	"scopeName": "source.rgl"
}