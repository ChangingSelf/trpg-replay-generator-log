{
  "name": "trpg-replay-generator-log",
  "displayName": "TRPG Replay Generator Log",
  "description": "Syntax highlighting and code snippets for TRPG-Replay-Generator-Log language",
  "version": "1.7.1",
  "engines": {
    "vscode": "^1.67.0"
  },
  "publisher": "yxChangingSelf",
  "repository": {
    "url": "https://gitee.com/ChangingSelf/trpg-replay-generator-log"
  },
  "categories": [
    "Programming Languages",
    "Themes",
    "Snippets"
  ],
  "icon": "images/icon.png",
  "activationEvents": [
    "onLanguage:rgl",
    "onCommand:trpg-replay-generator-log.testCommand",
    "onCommand:trpg-replay-generator-log.openDocument",
    "onCommand:trpg-replay-generator-log.count",
    "onCommand:trpg-replay-generator-log.checkDialogLineLength",
    "onCommand:trpg-replay-generator-log.defineMedia",
    "onCommand:trpg-replay-generator-log.defineCharacter",
    "onCommand:trpg-replay-generator-log.replaceAngleBrackets",
    "onCommand:trpg-replay-generator-log.addAsteriskMarks",
    "onCommand:trpg-replay-generator-log.addSoundEffectsInBatches",
    "onCommand:trpg-replay-generator-log.adjustSoundEffectsTimeInBatches",
    "onCommand:trpg-replay-generator-log.playVideo",
    "onCommand:trpg-replay-generator-log.exportVideo",
    "onCommand:trpg-replay-generator-log.synthesizedSpeech",
    "onCommand:trpg-replay-generator-log.exportXML",
    "onCommand:trpg-replay-generator-log.openMediaView",
    "onCommand:trpg-replay-generator-log.chatWithDiceBot",
    "onCommand:trpg-replay-generator-log.refreshTreeView"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "trpg-replay-generator-log.testCommand",
        "title": "TRGL: Test Command"
      },
      {
        "command": "trpg-replay-generator-log.count",
        "title": "TRGL: Count"
      },
      {
        "command": "trpg-replay-generator-log.openDocument",
        "title": "TRGL: Open Document"
      },
      {
        "command": "trpg-replay-generator-log.chatWithDiceBot",
        "title": "TRGL: Chat With DiceBot"
      },
      {
        "command": "trpg-replay-generator-log.checkDialogLineLength",
        "title": "TRGL: Check Dialog Line Length"
      },
      {
        "command": "trpg-replay-generator-log.defineMedia",
        "title": "TRGL: Define Media"
      },
      {
        "command": "trpg-replay-generator-log.defineCharacter",
        "title": "TRGL: Define Character"
      },
      {
        "command": "trpg-replay-generator-log.replaceAngleBrackets",
        "title": "TRGL: Replace Angle Brackets"
      },
      {
        "command": "trpg-replay-generator-log.addAsteriskMarks",
        "title": "TRGL: Add Asterisk Marks"
      },
      {
        "command": "trpg-replay-generator-log.addSoundEffectsInBatches",
        "title": "TRGL: Add Sound Effects In Batches"
      },
      {
        "command": "trpg-replay-generator-log.adjustSoundEffectsTimeInBatches",
        "title": "TRGL: Adjust Sound Effects Time In Batches"
      },
      {
        "command": "trpg-replay-generator-log.playVideo",
        "title": "TRGL: Play Video"
      },
      {
        "command": "trpg-replay-generator-log.exportVideo",
        "title": "TRGL: Export Video"
      },
      {
        "command": "trpg-replay-generator-log.synthesizedSpeech",
        "title": "TRGL: Synthesized Speech"
      },
      {
        "command": "trpg-replay-generator-log.exportXML",
        "title": "TRGL: Export XML"
      },
      {
        "command": "trpg-replay-generator-log.openMediaView",
        "title": "TRGL: Open Media View"
      }
      ,{
        "command": "trpg-replay-generator-log.refreshTreeView",
        "title": "TRGL: Refresh TreeView",
        "icon":{
          "light": "images/refresh.svg",
          "dark": "images/refresh_dark.svg"
        }
      }
    ],
    "languages": [
      {
        "id": "rgl",
        "aliases": [
          "rgl",
          "rgl"
        ],
        "extensions": [
          ".rgl"
        ],
        "configuration": "./language-configuration.json"
      }
    ],
    "grammars": [
      {
        "language": "rgl",
        "scopeName": "source.rgl",
        "path": "./syntaxes/rgl.tmLanguage.json"
      }
    ],
    "themes": [
      {
        "label": "rgl theme",
        "uiTheme": "vs-dark",
        "path": "./themes/rgl-theme-color-theme.json"
      },
      {
        "label": "rgl light theme",
        "uiTheme": "vs",
        "path": "./themes/rgl-light-theme-color-theme.json"
      }
    ],
    "snippets": [
      {
        "language": "rgl",
        "path": "./snippets.json"
      }
    ],
    "configuration": [
      {
        "order": 0,
        "title": "文件路径",
        "properties": {
          "trpg-replay-generator-log.path.RplGenCorePath": {
            "order": 0,
            "type": "string",
            "default": "",
            "description": "回声工坊的RplGenCore.exe文件所在路径（包含文件名），例如：D:/TRPG-Replay-Generator/RplGenCore.exe"
          },
          "trpg-replay-generator-log.path.MediaObjDefineFilePath": {
            "order": 1,
            "type": "string",
            "default": "",
            "description": "媒体定义文件所在路径（包含文件名），例如：F:/TRPG-Replay-Project/ModName/media.txt"
          },
          "trpg-replay-generator-log.path.CharacterTableFilePath": {
            "order": 2,
            "type": "string",
            "default": "",
            "description": "角色配置文件所在路径（包含文件名），例如：F:/TRPG-Replay-Project/ModName/characterTable.tsv"
          },
          "trpg-replay-generator-log.path.LogFilePath": {
            "order": 3,
            "type": "string",
            "default": "",
            "description": "跑团日志文件所在路径（包含文件名），例如：F:/TRPG-Replay-Project/ModName/log.rgl"
          },
          "trpg-replay-generator-log.path.OutputPath": {
            "order": 4,
            "type": "string",
            "default": "",
            "description": "输出路径，例如：F:/TRPG-Replay-Project/ModName/output/"
          },
          "trpg-replay-generator-log.path.TimeLine": {
            "order": 5,
            "type": "string",
            "default": "",
            "description": "timeline文件的路径，timeline文件是由主程序生成在输出路径的工程文件；"
          }
        }
      },
      {
        "order": 1,
        "title": "视频选项",
        "properties": {
          "trpg-replay-generator-log.video.FramePerSecond": {
            "order": 2,
            "type": "number",
            "default": 30,
            "description": "播放的帧率，单位是fps；默认值是30fps"
          },
          "trpg-replay-generator-log.video.WindowWidth": {
            "order": 0,
            "type": "number",
            "default": 1920,
            "description": "窗体的宽，默认值是1920"
          },
          "trpg-replay-generator-log.video.WindowHeight": {
            "order": 1,
            "type": "number",
            "default": 1080,
            "description": "窗体的高，默认值是1080"
          },
          "trpg-replay-generator-log.video.Zorder": {
            "order": 3,
            "type": "string",
            "default": "BG3,BG2,BG1,Am3,Am2,Am1,Bb",
            "markdownDescription": "修改图层顺序参数，可以改变各个图层的重叠关系。默认的图层顺序为`-Z 'BG3,BG2,BG1,Am3,Am2,Am1,Bb'`，顺序为从下到上，即*背景*在最下层，*气泡*在最上层，*立绘*在中间，其中主立绘在其他立绘上层。主要的修改需求可能是要求立绘覆盖在气泡的上层，因此，可以将 *--Zorder* 参数设置为 `'-Z BG3,BG2,BG1,Bb,Am3,Am2,Am1'`"
          },
          "trpg-replay-generator-log.video.Quality": {
            "order": 4,
            "type": "number",
            "default": 24,
            "description": "导出为mp4视频时的质量，即ffmpeg程序的crf值；取值范围为0-51，越小对应越高的视频质量，通常合理范围为18-28；默认值是24"
          }
        }
      },
      {
        "order": 2,
        "title": "语音Key",
        "properties": {
          "trpg-replay-generator-log.key.aliyun.AccessKey": {
            "order": 1,
            "type": "string",
            "default": "your_AccessKey",
            "description": "阿里云账号的AccessKey ID，使用阿里云音源执行语音合成时所需要的"
          },
          "trpg-replay-generator-log.key.aliyun.AccessKeySecret": {
            "order": 2,
            "type": "string",
            "default": "your_AccessKeySecret",
            "description": "阿里云账号的AccessKeySecret 密钥，使用阿里云音源执行语音合成时所需要的"
          },
          "trpg-replay-generator-log.key.aliyun.Appkey": {
            "order": 0,
            "type": "string",
            "default": "your_Appkey",
            "description": "阿里云语音合成应用的Appkey，使用阿里云音源执行语音合成时所需要的"
          },
          "trpg-replay-generator-log.key.Azure.Azurekey": {
            "order": 3,
            "type": "string",
            "default": "your_Azurekey",
            "description": "微软Azure认知语音服务的Key，使用Azure音源执行语音合成时所需要的"
          },
          "trpg-replay-generator-log.key.Azure.ServRegion": {
            "order": 4,
            "type": "string",
            "default": "eastasia",
            "description": "微软Azure认知语音服务的服务地区，使用Azure音源执行语音合成时所需要的；默认是东亚地区"
          }
        }
      },
      {
        "order": 3,
        "title": "标志",
        "properties": {
          "trpg-replay-generator-log.flag.FixScreenZoom": {
            "order": 0,
            "type": "boolean",
            "default": true,
            "description": "取消系统缩放。仅在windows系统上生效。使用该标志以消除由于windows系统缩放倍率，而导致的窗体尺寸异常。"
          },
          "trpg-replay-generator-log.flag.SynthesisAnyway": {
            "order": 1,
            "type": "boolean",
            "default": false,
            "description": "先执行语音合成。若勾选了该选项，则会在播放视频或导出之前先进行语音合成"
          },
          "trpg-replay-generator-log.flag.ExportXML": {
            "order": 2,
            "type": "boolean",
            "default": false,
            "description": "导出XML。若勾选了该选项，则执行导出视频命令不导出视频，而是会导出为可以导入PR的XML"
          }
        }
      },
      {
        "order": 4,
        "title": "悬停提示",
        "properties": {
          "trpg-replay-generator-log.hover.Enable": {
            "order": 0,
            "type": "boolean",
            "default": true,
            "description": "悬停提示总开关。关闭后其他悬停提示设置不再启用"
          },
          "trpg-replay-generator-log.hover.EnableDialogLine": {
            "order": 1,
            "type": "boolean",
            "default": true,
            "description": "对话行悬停提示的开关。"
          },
          "trpg-replay-generator-log.hover.EnableConfigLine": {
            "order": 2,
            "type": "boolean",
            "default": true,
            "description": "设置行悬停提示的开关。"
          },
          "trpg-replay-generator-log.hover.EnableBackgroundLine": {
            "order": 3,
            "type": "boolean",
            "default": true,
            "description": "背景行悬停提示的开关。"
          },
          "trpg-replay-generator-log.hover.EnableAnimationLine": {
            "order": 4,
            "type": "boolean",
            "default": true,
            "description": "动画行悬停提示的开关。"
          }
        }
      }
    ],
    "walkthroughs": [
      {
        "id": "ExtensionTutorial",
        "title": "回声工坊插件基础教程",
        "description": "一步步教你如何使用本插件辅助制作replay视频",
        "steps": [
          {
            "id": "README"
            ,"title": "查看本插件的图文帮助文档"
            ,"description": "你可以在下面这个网址中找到比插件商店页面更详细的图文教程\n[图文帮助文档](https://www.wolai.com/oPvjzFX3gQDZjV5JLAxpuR)"
            ,"completionEvents": []
            ,"media": {"markdown": "README.md"}
          }
          ,{
            "id": "ChangeLanguage"
            ,"title": "修改vscode的显示语言为中文"
            ,"description": "你可以在插件商店（就是你安装这个插件时打开的页面）搜索“Chinese”，下载量最高的那个插件就是你需要安装的中文插件。\n安装它，然后会有个提示框在右下角弹出来问你要不要修改语言为中文，点击Change Language and Reset那个按钮修改语言\n或者点击这句话下面的按钮修改语言\n[修改显示语言](command:workbench.action.configureLocale)"
            ,"media": {"image": "images/icon.png","altText": "图片丢失"}
            ,"completionEvents": ["onExtensionInstalled:ms-ceintl.vscode-language-pack-zh-hans","onCommand:workbench.action.configureLocale"]
          }
          ,{
            "id": "OpenFolder"
            ,"title": "打开文件夹"
            ,"description": "vscode可以打开文件或者文件夹。\n点击侧边栏最上方的文件图标打开“资源管理器”，你可以看到你已经打开的文件夹。\n如果你没有打开文件夹，可以点击vscode给出的按钮打开你打算用来制作replay的文件夹。\n虽然不打开文件夹也可以编辑log文件，但是侧边栏的资源管理器可以很方便地以树状结构显示和跳转你的项目文件夹的文件，很方便，为什么不试试看呢？\n[打开文件夹](command:workbench.action.files.openFolder)"
            ,"media": {"image": "images/icon.png","altText": "图片丢失"}
            ,"completionEvents": ["onCommand:workbench.action.files.openFolder"]
          }
          ,{
            "id": "OpenFile"
            ,"title": "打开文件"
            ,"description": "打开文件夹之后，你可以点击资源管理器的树状图当中的各个文件。\n如果是文本文件就可以在编辑器中打开以查看与编辑；\n如果是图片则可以预览。\n试试看吧！"
            ,"media": {"image": "images/icon.png","altText": "图片丢失"}
            ,"completionEvents": []
          }
          ,{
            "id": "CreateFile"
            ,"title": "新建rgl剧本文件"
            ,"description": "你可以点击资源管理器中的新建文件的图标，或者打开右键菜单，或者打开vscode顶部的【文件】菜单来新建一个文件或者文件夹。\n选中某个文件夹时新建文件或文件夹，会让它们生成在选中的文件夹里面。\n新建的文件没有后缀名（或者称为扩展名），你需要在文件名字后面加上。\n例如：“新建文件.rgl”、“LogFile.txt”、“episode1.rgl”\n由于本插件支持rgl文件的语法高亮以及各种其他辅助功能，因此需要将后缀名改为“.rgl”才能更好地使用本插件。\n选中文件后使用键盘F2按键或者右键菜单都可以重命名文件\n[文件后缀名是什么？](https://www.wolai.com/9QKAUz4VvohigMJFH7BJVJ)"
            ,"media": {"image": "images/icon.png","altText": "图片丢失"}
            ,"completionEvents": []
          }
          ,{
            "id": "OpenExampleProject"
            ,"title": "打开回声工坊示例项目，查看语法高亮"
            ,"description": "你可以用vscode打开回声工坊软件目录（“目录”即“文件夹”）下的“toy”文件夹\n预览其中的rgl文件，你可以看到文件的不同要素都被染成了不同的颜色，这就是[语法高亮](https://www.wolai.com/pyeK3jgTLwzyAoGFv6nmue)\n[打开文件夹](command:workbench.action.files.openFolder)"
            ,"media": {"image": "images/syntaxHighlight.png","altText": "语法高亮"}
            ,"completionEvents": []
          }
          ,{
            "id": "AutoNewLine"
            ,"title": "让过长的对话行自动换行"
            ,"description": "这是vscode自带功能，使用组合键Alt+Z或者在顶部菜单栏【查看】中选择“自动换行”，就可以实现一行字数过多时自动换到下一行，从而不需要横向滚动\n[切换自动换行](command:editor.action.toggleWordWrap)"
            ,"media": {"image": "images/icon.png","altText": "图片丢失"}
            ,"completionEvents": ["onCommand:editor.action.toggleWordWrap"]
          }
          ,{
            "id": "Snippets"
            ,"title": "使用代码片段"
            ,"description": "你可以在rgl文件中输入一些触发词来触发代码片段，它可以帮你快速输入一些东西\n[更多代码片段演示动画](https://www.wolai.com/fJGojMQjUbuvjbXu549yyr)"
            ,"media": {"image": "images/snippetsUsage.gif","altText": "代码片段用法演示"}
            ,"completionEvents": []
          }
          ,{
            "id": "ColorThemes"
            ,"title": "修改颜色主题"
            ,"description": "在本插件的插件商店页面点击“设置颜色主题”按钮就可以设置颜色主题，本插件提供了深色和浅色两种颜色主题\n不同的颜色主题有着不同的语法高亮，选一个你看着舒服的\n当然，你也可以使用其他的颜色主题，而非插件自带的\n[设置颜色主题](command:workbench.action.selectTheme)"
            ,"media": {"image": "images/icon.png","altText": "图片丢失"}
            ,"completionEvents": ["onCommand:workbench.action.selectTheme"]
          }
          ,{
            "id": "FoldMark"
            ,"title": "使用折叠标记"
            ,"description": "在想要折叠的起始行和末尾行分别加上 `#s`和 `#e`的注释，即可对中间的内容进行折叠\n可以嵌套，而且这两个边界标记后面可以加注释，例如 `#s 这是折叠的起始行，意思是start`，`#e 这是折叠的末尾行，意思是end。`"
            ,"media": {"image": "images/foldMark.gif","altText": "折叠标记"}
            ,"completionEvents": []
          }
          ,{
            "id": "Hovering"
            ,"title": "悬停提示"
            ,"description": "鼠标移动到rgl文件的各个元素并悬停时，会出现相应的说明文字。可以在插件设置中关闭。"
            ,"media": {"image": "images/Hovering.gif","altText": "悬浮提示"}
            ,"completionEvents": []
          }
          ,{
            "id": "ChangeSettings"
            ,"title": "修改插件设置"
            ,"description": "ctrl+逗号或者点击左下角的齿轮图标就能找到全局设置。\n在侧边栏找到本插件名字，或者在上方搜索框中搜索，接着找到你想要修改的设置即可"
            ,"media": {"image": "images/ChangeSettings.gif","altText": "修改设置"}
            ,"completionEvents": []
          }
          ,{
            "id": "StatusBar"
            ,"title": "状态栏"
            ,"description": "当你的光标停留在rgl文件内时，可以在状态栏（最底下的条）的左侧看到该剧本文件的一些统计信息"
            ,"media": {"image": "images/StatusBar.png","altText": "图片丢失"}
            ,"completionEvents": []
          }
          ,{
            "id": "UseCommand"
            ,"title": "使用命令"
            ,"description": "本插件的更多辅助功能做成了命令的形式。vscode命令的使用方法是：ctrl+shift+p唤出命令面板，输入命令名字，enter键确认。\n打开命令面板的其他方式：\n- 右键菜单中“命令面板”选项\n- 菜单栏【帮助】>【显示所有命令】\n[打开命令面板](command:workbench.action.showCommands)\n[查看所有命令](https://www.wolai.com/bs7j9tAbqMCGZX8VNqMFKw)"
            ,"media": {"markdown": "README.md"}
            ,"completionEvents": ["onCommand:workbench.action.showCommands"]
          }
          
        ]
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "rgl-explorer",
          "title": "回声工坊资源管理器",
          "icon": "images/icon.png"
        }
      ]
    },
    "views": {
      "rgl-explorer":[
        {
          "id": "rglCharacter",
          "name": "角色"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "rglCharacter",
        "contents": "目前没有检测到回声工坊的log文件，请检查是否已经打开了文件或者文件夹，是否将剧本文件的后缀名从“.txt”改为了“.rgl”\n[打开文件](command:workbench.action.files.openFile)\n[打开文件夹](command:workbench.action.files.openFolder)",
        "when": "editorLangId != rgl"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "trpg-replay-generator-log.refreshTreeView",
          "when": "view == rglCharacter",
          "group": "navigation"
      }
      ]
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "webpack",
    "watch": "webpack --watch",
    "package": "webpack --mode production --devtool hidden-source-map",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "npm run compile-tests && npm run compile && npm run lint",
    "lint": "eslint src --ext ts",
    "test": "node ./out/test/runTest.js"
  },
  "devDependencies": {
    "@types/glob": "^7.2.0",
    "@types/jquery": "^3.5.14",
    "@types/mocha": "^9.1.1",
    "@types/node": "16.x",
    "@types/vscode": "^1.67.0",
    "@typescript-eslint/eslint-plugin": "^5.27.0",
    "@typescript-eslint/parser": "^5.27.0",
    "@vscode/test-electron": "^2.1.3",
    "eslint": "^8.16.0",
    "glob": "^8.0.3",
    "mocha": "^10.0.0",
    "ts-loader": "^9.3.0",
    "typescript": "^4.7.2",
    "webpack": "^5.72.1",
    "webpack-cli": "^4.9.2"
  },
  "dependencies": {
    "axios": "^0.27.2",
    "jquery": "^3.6.1"
  }
}
